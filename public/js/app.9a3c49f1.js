(function(t){function e(e){for(var n,o,r=e[0],d=e[1],l=e[2],c=0,m=[];c<r.length;c++)o=r[c],s[o]&&m.push(s[o][0]),s[o]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,r=1;r<a.length;r++){var d=a[r];0!==s[d]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=d;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00e6":function(t,e,a){},"046b":function(t,e,a){},"12ae":function(t,e,a){"use strict";var n=a("c2fe"),s=a.n(n);s.a},"12b5":function(t,e,a){},1611:function(t,e,a){},"1d6b":function(t,e,a){"use strict";var n=a("5ff0"),s=a.n(n);s.a},2513:function(t,e,a){"use strict";var n=a("d00c"),s=a.n(n);s.a},"25cc":function(t,e,a){"use strict";var n=a("a87a"),s=a.n(n);s.a},"2c1a":function(t,e,a){"use strict";var n=a("3d3a"),s=a.n(n);s.a},"2f66":function(t,e,a){},"3d3a":function(t,e,a){},"3d6e":function(t,e,a){"use strict";var n=a("12b5"),s=a.n(n);s.a},"53e7":function(t,e,a){"use strict";var n=a("2f66"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=a("8c4f"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},o=[],r={},d=r,l=a("2877"),u=Object(l["a"])(d,i,o,!1,null,null,null),c=u.exports,m=a("a745"),f=a.n(m),p=a("cebc"),h=(a("28a5"),a("c5f6"),a("f499")),v=a.n(h),b=(a("3b2b"),a("a481"),{expires:"1d",path:"; path=/"}),g={install:function(t){t.prototype.$cookies=this},config:function(t,e){t&&(b.expires=t),e&&(b.path="; path=".concat(e))},get:function(t){var e=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||null;if(e&&"{"===e.substring(0,1)&&"}"===e.substring(e.length-1,e.length))try{e=JSON.parse(e)}catch(a){return e}return e},set:function(t,e,a,n,s,i){if(!t)throw new Error("cookie name is not find in first argument");if(/^(?:expires|max\-age|path|domain|secure)$/i.test(t))throw new Error("cookie key name illegality ,Cannot be set to ['expires','max-age','path','domain','secure']\t","current key name: ".concat(t));e&&e.constructor===Object&&(e=v()(e));var o="";if(a=void 0===a?b.expires:a,a&&0!=a)switch(a.constructor){case Number:o=a===1/0||-1===a?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age=".concat(a);break;case String:if(/^(?:\d{1,}(y|m|d|h|min|s))$/i.test(a)){var r=a.replace(/^(\d{1,})(?:y|m|d|h|min|s)$/i,"$1");switch(a.replace(/^(?:\d{1,})(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":o="; max-age=".concat(2592e3*+r);break;case"d":o="; max-age=".concat(86400*+r);break;case"h":o="; max-age=".concat(3600*+r);break;case"min":o="; max-age=".concat(60*+r);break;case"s":o="; max-age=".concat(r);break;case"y":o="; max-age=".concat(31104e3*+r);break;default:new Error("unknown exception of 'set operation'")}}else o="; expires=".concat(a);break;case Date:o="; expires=".concat(a.toUTCString());break}return document.cookie="".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e)).concat(o).concat(s?"; domain=".concat(s):"").concat(n?"; path=".concat(n):b.path).concat(i?"; secure":""),this},remove:function(t,e,a){return!(!t||!this.isKey(t))&&(document.cookie="".concat(encodeURIComponent(t),"=; expires=Thu, 01 Jan 1970 00:00:00 GMT").concat(a?"; domain=".concat(a):"").concat(e?"; path=".concat(e):b.path),this)},isKey:function(t){return new RegExp("(?:^|;\\s*)".concat(encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),"\\s*\\=")).test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}},_=g,y=a("795b"),x=a.n(y),C=a("bc3a"),$=a.n(C);$.a.defaults.baseURL="",$.a.defaults.withCredentials=!0,$.a.interceptors.response.use(function(t){return t},function(t){return t.response?(401===t.response.status&&(_.get("_us_r")&&(_.set("_fm","Your session has expired."),_.remove("_us_r")),Ua.push({name:"login"})),x.a.reject(t.response.data)):x.a.reject({message:{server:"Server is not responding."}})});var O,w,q=$.a,M={guard:function(t,e,a){return M.isUser()?a():Ua.push({name:"login"})},logout:function(t){var e=t.next;t.router;M.isUser()&&q.get("/auth/logout").then(function(t){_.remove("user")}),e()},isUser:function(){return Boolean(_.get("_us_r"))}},E=M,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page-background"}),a("div",{staticClass:"page-content"},[a("transition",{attrs:{name:"move",mode:"out-in"}},[a("router-view")],1)],1)])},S=[],A={},D=A,F=Object(l["a"])(D,k,S,!1,null,null,null),P=F.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"centered-container"},[a("div",{staticClass:"background"}),a("transition",{attrs:{name:"page",mode:"out-in"}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-content",[a("form",{on:{submit:function(e){return e.preventDefault(),t.sendAuth(e)}}},[a("md-card-media",[a("img",{staticStyle:{"min-height":"80px"},attrs:{src:"logo.png",height:"80",width:"80"}})]),a("md-card-header",[a("div",{staticClass:"md-title"},[t._v("\n\t\t\t\t\t\t\tPOS LOGIN\n\t\t\t\t\t\t")])]),a("md-card-content",[a("md-field",{class:t.username.status},[a("md-icon",[t._v("account_box")]),a("label",[t._v("Username")]),a("md-input",{attrs:{autofocus:"",disabled:t.loading},on:{keydown:function(e){t.username.status=""}},model:{value:t.username.value,callback:function(e){t.$set(t.username,"value",e)},expression:"username.value"}}),a("span",{staticClass:"md-error"},[t._v(t._s(t.username.message))])],1),a("md-field",{class:t.password.status,attrs:{"md-has-password":""}},[a("md-icon",[t._v("dashboard")]),a("label",[t._v("Password")]),a("md-input",{attrs:{type:"password",disabled:t.loading},on:{keydown:function(e){t.password.status=""}},model:{value:t.password.value,callback:function(e){t.$set(t.password,"value",e)},expression:"password.value"}}),a("span",{staticClass:"md-error"},[t._v(t._s(t.password.message))])],1)],1),a("p",{directives:[{name:"visible",rawName:"v-visible",value:Boolean(t.flashMessage),expression:"Boolean(flashMessage)"}],staticClass:"text-message"},[t._v("\n\t\t\t\t\t\t"+t._s(t.flashMessage)+"\n\t\t\t\t\t")]),a("p",{directives:[{name:"visible",rawName:"v-visible",value:Boolean(t.message),expression:"Boolean(message)"}],staticClass:"text-message"},[t._v("\n\t\t\t\t\t\t"+t._s(t.message)+"\n\t\t\t\t\t")]),a("md-card-actions",[a("div",{staticClass:"actions md-layout md-alignment-center-space-between"},[a("md-button",{staticClass:"md-raised md-primary",attrs:{type:"submit",disabled:t.loading},on:{click:t.sendAuth}},[t._v("\n\t\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t\t")])],1)])],1)])],1)],1)],1)},j=[],L={name:"HandleMessage",data:function(){},created:function(){var t=this.$cookies.get("_fm");t&&(this.flashMessage=t,this.$cookies.remove("_fm"))},methods:{handleMessage:function(t){if("string"===typeof t)this.$root.$emit("showMsg",t);else{var e=[];for(var a in t)this.form&&this.form.hasOwnProperty(a)?this.form[a].message=t[a]:e.push(t[a]);e.length>0?this.$root.$emit("showMsg",e.join("\n\r")):this.$root.$emit("hideMsg")}}}},U=L,B=Object(l["a"])(U,O,w,!1,null,null,null),N=B.exports,z={name:"App",mixins:[N],data:function(){return{loading:!1,username:{status:"",value:"",message:""},password:{status:"",value:"",message:""},message:"",flashMessage:"",errorClass:"md-invalid"}},methods:{clearMsg:function(){this.flashMessage="",this.message=""},sendAuth:function(){var t=this;this.clearMsg(),this.loading=!0,this.$axios.post(this.$api.auth.login,{username:this.username.value,password:this.password.value}).then(function(e){var a=e.data.user;a&&t.$cookies.set("_us_r",btoa(v()(a))),t.$router.push({name:"bill-creator"})}).catch(function(e){var a=e.message;if(t.message="",a)for(var n in a)t.hasOwnProperty(n)?(t[n].message=a[n],t[n].status=t.errorClass):t.message+=a[n]}).then(function(){t.loading=!1})}}},I=z,R=(a("ffb1"),Object(l["a"])(I,T,j,!1,null,"087eaca0",null)),Q=R.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("navbar"),a("dash-content"),a("notify"),a("dial")],1)},J=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar"},[a("md-tabs",{staticClass:"md-primary",attrs:{"md-alignment":"centered","md-sync-route":""}},[a("md-tab",{attrs:{id:"tab-profile","md-label":t.user.fullname,"md-icon":"account_circle",to:"/profile"}}),t.user.isAdmin?a("md-tab",{attrs:{id:"tab-users","md-label":"Users","md-icon":"supervisor_account",to:"/users"}}):t._e(),a("md-tab",{attrs:{id:"tab-customers","md-label":"Customers","md-icon":"fiber_smart_record",to:"/customers"}}),a("md-tab",{attrs:{id:"tab-products","md-label":"Products","md-icon":"category",to:"/products"}}),a("md-tab",{attrs:{id:"tab-bills","md-label":"Bills","md-icon":"featured_play_list",to:"/bills"}}),a("md-tab",{attrs:{id:"tab-bill","md-label":"Create Bill","md-icon":"playlist_add",to:"/bill-creator"}}),t.user.sysAdmin?a("md-tab",{attrs:{id:"tab-activity-log","md-label":"Activity Log","md-icon":"assignment",to:"/activity-logs"}}):t._e(),a("md-tab",{attrs:{id:"tab-logout","md-label":"Log Out","md-icon":"call_missed_outgoing",to:"/logout"}})],1)],1)},W=[],K={name:"TabIcons",data:function(){return{user:{fullname:"",username:""}}},created:function(){this.user=JSON.parse(atob(this.$cookies.get("_us_r")))},mounted:function(){var t=this;this.$root.$on("selfEdit",function(e){t.$cookies.set("_us_r",btoa(v()(e))),t.user=e})}},Y=K,H=(a("2513"),Object(l["a"])(Y,V,W,!1,null,"4850921e",null)),X=H.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dash-content"},[a("transition",{attrs:{name:"move",mode:"out-in"}},[a("router-view")],1)],1)},tt=[],et={},at=et,nt=(a("2c1a"),Object(l["a"])(at,Z,tt,!1,null,null,null)),st=nt.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-snackbar",{attrs:{"md-position":"left","md-duration":1/0,"md-active":t.show,"md-persistent":""},on:{"update:mdActive":function(e){t.show=e},"update:md-active":function(e){t.show=e},click:function(e){t.show=!1}}},[a("span",{domProps:{textContent:t._s(t.message)}}),a("md-button",{staticClass:"md-primary",on:{click:function(e){t.show=!1}}},[t._v("\n\t\t\t×\n\t\t")])],1)],1)},ot=[],rt={name:"Notify",data:function(){return{message:"",show:!1}},watch:{$route:function(t,e){this.show=!1}},mounted:function(){var t=this;this.$root.$on("showMsg",function(e){t.message=e,t.show=!0}),this.$root.$on("hideMsg",function(){t.show=!1})}},dt=rt,lt=(a("cde1"),Object(l["a"])(dt,it,ot,!1,null,"98638150",null)),ut=lt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-speed-dial",{staticClass:"md-top-right md-fixed",attrs:{"md-event":"click","md-direction":"bottom"}},[a("md-speed-dial-target",{staticClass:"md-primary"},[a("md-icon",{staticClass:"md-morph-initial"},[t._v("\n\t\t\t\tadd\n\t\t\t")]),a("md-icon",{staticClass:"md-morph-final"},[t._v("\n\t\t\t\tclose\n\t\t\t")])],1),a("md-speed-dial-content",[a("md-button",{staticClass:"md-raised md-accent",attrs:{to:"/bill-creator"}},[t._v("\n\t\t\t\tnew Bill\n\t\t\t")]),a("md-button",{staticClass:"md-accent",on:{click:function(e){t.userDialog=!0}}},[t._v("\n\t\t\t\tnew User\n\t\t\t")]),a("md-button",{staticClass:"md-accent",on:{click:function(e){t.customerDialog=!0}}},[t._v("\n\t\t\t\tnew Customer\n\t\t\t")]),a("md-button",{staticClass:"md-accent",on:{click:function(e){return t.showNewDialog("productDialog")}}},[t._v("\n\t\t\t\tnew Product\n\t\t\t")])],1)],1),a("md-dialog",{staticClass:"user-dialog",attrs:{"md-active":t.userDialog},on:{"update:mdActive":function(e){t.userDialog=e},"update:md-active":function(e){t.userDialog=e}}},[a("user-form")],1),a("md-dialog",{staticClass:"customer-dialog",attrs:{"md-active":t.customerDialog},on:{"update:mdActive":function(e){t.customerDialog=e},"update:md-active":function(e){t.customerDialog=e}}},[a("customer-form")],1),a("md-dialog",{staticClass:"product-dialog",attrs:{"md-active":t.productDialog},on:{"update:mdActive":function(e){t.productDialog=e},"update:md-active":function(e){t.productDialog=e}}},[a("md-dialog-content",[a("product-form",{attrs:{product:t.product}})],1)],1)],1)},mt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-card-content",{staticClass:"md-toolbar"},[t.formAdd?a("h2",[t._v("\n\t\t\t\t\tADD NEW USER\n\t\t\t\t")]):t._e(),t.formEdit?a("h2",[t._v("\n\t\t\t\t\tEDIT USER\n\t\t\t\t")]):t._e()]),a("md-card-content",[a("field-input",{attrs:{field:t.form.username,disabled:t.loading||t.formEdit,tip2:t.formEdit}}),a("field-input",{attrs:{field:t.form.fullname,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.phone,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.password,disabled:t.loading,tip2:t.formEdit}}),a("md-checkbox",{staticClass:"md-primary",attrs:{disabled:t.loading},model:{value:t.form.isAdmin,callback:function(e){t.$set(t.form,"isAdmin",e)},expression:"form.isAdmin"}},[t._v("\n\t\t\t\t\tAdmin\n\t\t\t\t")]),a("md-checkbox",{staticClass:"md-primary",attrs:{disabled:t.loading},model:{value:t.form.isStaff,callback:function(e){t.$set(t.form,"isStaff",e)},expression:"form.isStaff"}},[t._v("\n\t\t\t\t\tStaff\n\t\t\t\t")])],1),a("md-card-actions",[a("md-button",{staticClass:"md-accent",attrs:{type:"button",disabled:t.loading},on:{click:t.resetForm}},[t._v("\n\t\t\t\t\tReset\n\t\t\t\t")]),t.formAdd?a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.loading}},[t._v("\n\t\t\t\t\tAdd\n\t\t\t\t")]):a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.loading}},[t._v("\n\t\t\t\t\tEdit\n\t\t\t\t")])],1)],1)],1)])},pt=[],ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-field",{class:{"md-invalid":t.field.message},attrs:{"md-counter":t.field.maxlength>0}},[t.field.hicon?a("md-icon",[t._v("\n\t\t\t"+t._s(t.field.hicon)+"\n\t\t")]):t._e(),a("label",{attrs:{for:t.field.name}},[t._v("\n\t\t\t"+t._s(t.field.label)+"\n\t\t\t"),t.tip1?a("span",[a("md-icon",{staticClass:"tooltip-icon"},[t._v(" help_outline ")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[t._v(t._s(t.field.tooltip1))])],1):t._e(),t.tip2?a("span",[a("md-icon",{staticClass:"tooltip-icon"},[t._v(" help_outline ")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[t._v(t._s(t.field.tooltip2))])],1):t._e()]),t.field.prefix?a("span",{staticClass:"md-prefix"},[t._v(t._s(t.field.prefix))]):t._e(),a("md-input",{attrs:{id:t.field.name,type:t.field.type||"text",name:t.field.name,disabled:t.disabled,min:void 0!=t.field.min?t.field.min:null,max:t.field.max>0?t.field.max:null,maxlength:t.field.maxlength>0?t.field.maxlength:null},on:{input:function(e){t.field.message=""}},model:{value:t.field.value,callback:function(e){t.$set(t.field,"value",e)},expression:"field.value"}}),t.field.ficon?a("md-icon",[t._v("\n\t\t\t"+t._s(t.field.ficon)+"\n\t\t")]):t._e(),t.field.suffix?a("span",{staticClass:"md-suffix"},[t._v(t._s(t.field.suffix))]):t._e(),a("span",{staticClass:"md-helper-text"},[t._v(t._s(t.field.helper))]),a("span",{staticClass:"md-error"},[t._v(t._s(t.field.message))])],1)],1)},vt=[],bt={name:"FieldInput",props:{field:{type:Object,default:function(){return{label:"Label",name:"",type:"text",value:"",message:"",prefix:"",suffix:"",maxlength:null}}},disabled:{type:Boolean,default:!1},tip1:{type:Boolean,default:!1},tip2:{type:Boolean,default:!1}}},gt=bt,_t=(a("aefb"),Object(l["a"])(gt,ht,vt,!1,null,"1e6c36fc",null)),yt=_t.exports,xt=function(){return{isAdmin:!1,isStaff:!0,fullname:{hicon:"title",label:"Full name",name:"fullname",type:"text",value:"",message:""},username:{hicon:"account_box",label:"Username",name:"username",type:"text",tooltip2:"Username can not be edited",value:"",message:""},password:{hicon:"dashboard",label:"Password",name:"password",type:"password",tooltip2:"Password is not showing",value:"",message:""},phone:{hicon:"local_phone",label:"Phone number",name:"phone",type:"text",value:"",message:""}}},Ct={name:"UserForm",components:{"field-input":yt},mixins:[N],props:{user:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,formAdd:!0,form:xt()}},computed:{formEdit:function(){return!this.formAdd}},watch:{user:function(t,e){this.fillForm(t)},"form.isAdmin":function(t){t&&(this.form.isStaff=!0)},"form.isStaff":function(t){t||(this.form.isAdmin=!1)}},methods:{resetForm:function(){this.formAdd=!0,this.form=xt()},fillForm:function(t){this.form.fullname.value=t.fullname,this.form.username.value=t.username,this.form.phone.value=t.phone,this.form.isAdmin=t.isAdmin,this.form.isStaff=t.isStaff,this.formAdd=!1},getFormData:function(){var t={fullname:this.form.fullname.value,username:this.form.username.value,phone:this.form.phone.value,isAdmin:this.form.isAdmin,isStaff:this.form.isStaff};return this.form.password.value&&(t.password=this.form.password.value),t},handleSubmit:function(){this.$root.$emit("hideMsg"),this.loading=!0,this.formAdd?this.add():this.edit()},add:function(){var t=this;this.$axios.post(this.$api.user.add,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.user;s&&t.$root.$emit("userAdded",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})},edit:function(){var t=this;this.$axios.post(this.$api.user.edit,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.user;s&&t.$root.$emit("userEdited",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},$t=Ct,Ot=Object(l["a"])($t,ft,pt,!1,null,null,null),wt=Ot.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-card-content",{staticClass:"md-toolbar"},[t.formAdd?a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\tADD NEW CUSTOMER\n\t\t\t\t")]):t._e(),t.formEdit?a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\tEDIT CUSTOMER\n\t\t\t\t")]):t._e()]),a("md-card-content",[a("field-input",{attrs:{field:t.form.fullname,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.phone,disabled:t.loading}}),a("md-content",[a("span",{staticClass:"md-body-1"},[t._v("Point: ")]),a("md-chip",{attrs:{"md-static":""}},[t._v("\n\t\t\t\t\t\t"+t._s(t.form.point)+"\n\t\t\t\t\t")])],1)],1),a("md-card-actions",[a("md-button",{staticClass:"md-accent",attrs:{type:"button",disabled:t.loading},on:{click:t.resetForm}},[t._v("\n\t\t\t\t\tReset\n\t\t\t\t")]),t.formAdd?a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.loading}},[t._v("\n\t\t\t\t\tAdd\n\t\t\t\t")]):a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.loading}},[t._v("\n\t\t\t\t\tEdit\n\t\t\t\t")])],1)],1)],1)])},Mt=[],Et=function(){return{_id:"",fullname:{hicon:"title",label:"Full name",name:"fullname",type:"text",value:"",message:""},phone:{hicon:"local_phone",label:"Phone number",name:"phone",type:"text",value:"",message:""},point:0}},kt={name:"CustomerForm",components:{"field-input":yt},mixins:[N],props:{customer:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,formAdd:!0,form:Et()}},computed:{formEdit:function(){return!this.formAdd}},watch:{customer:function(t,e){this.fillForm(t)}},methods:{resetForm:function(){this.form=Et(),this.formAdd=!0},fillForm:function(t){this.form.fullname.value=t.fullname,this.form.phone.value=t.phone,this.form._id=t._id,this.form.point=t.point,this.formAdd=!1},getFormData:function(){var t={fullname:this.form.fullname.value,phone:this.form.phone.value};return this.formEdit&&(t._id=this.form._id),t},handleSubmit:function(){this.$root.$emit("hideMsg"),this.loading=!0,this.formAdd?this.add():this.edit()},add:function(){var t=this;this.$axios.post(this.$api.customer.add,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.customer;s&&t.$root.$emit("customerAdded",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})},edit:function(){var t=this;this.$axios.post(this.$api.customer.edit,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.customer;s&&t.$root.$emit("customerEdited",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},St=kt,At=Object(l["a"])(St,qt,Mt,!1,null,null,null),Dt=At.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"product-form"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-card-content",{staticClass:"md-toolbar"},[t.formAdd?a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\tADD NEW PRODUCT\n\t\t\t\t")]):t._e(),t.formEdit?a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\tEDIT PRODUCT\n\t\t\t\t")]):t._e()]),a("md-card-content",[a("div",{staticClass:"md-layout md-gutter md-alignment-center-center"},[a("div",{staticClass:"md-layout-item"},[a("field-input",{attrs:{field:t.form.name,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.code,disabled:t.loading||t.formEdit}}),a("field-input",{attrs:{field:t.form.origin,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.price,disabled:t.loading}})],1),a("div",{staticClass:"md-layout-item"},[a("field-input",{attrs:{field:t.form.quantity,disabled:t.loading}}),a("field-input",{attrs:{field:t.form.sale,disabled:t.loading}}),a("field-date",{attrs:{field:t.form.saleBegin,disabled:t.loading}}),a("field-date",{attrs:{field:t.form.saleEnd,disabled:t.loading}})],1),a("div",{staticClass:"md-layout-item",staticStyle:{"margin-top":"0"}},[a("md-switch",{staticClass:"md-primary",model:{value:t.form.status.value,callback:function(e){t.$set(t.form.status,"value",e)},expression:"form.status.value"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.form.status.label)+"\n\t\t\t\t\t\t")])],1)])]),a("md-card-actions",[a("md-button",{staticClass:"md-accent",attrs:{type:"button"},on:{click:t.resetForm,disabled:t.loading}},[t._v("\n\t\t\t\t\tReset\n\t\t\t\t")]),t.formAdd?a("md-button",{staticClass:"md-primary",attrs:{type:"submit"},on:{disabled:t.loading}},[t._v("\n\t\t\t\t\tAdd\n\t\t\t\t")]):a("md-button",{staticClass:"md-primary",attrs:{type:"submit"},on:{disabled:t.loading}},[t._v("\n\t\t\t\t\tEdit\n\t\t\t\t")])],1)],1)],1)])},Pt=[],Tt=(a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-datepicker",{class:{"md-invalid":Boolean(t.field.message)},attrs:{"md-immediately":"",disabled:t.disabled},on:{"md-opened":t.clearMsg},model:{value:t.field.value,callback:function(e){t.$set(t.field,"value",e)},expression:"field.value"}},[a("label",[t._v(t._s(t.field.label))]),a("span",{staticClass:"md-error"},[t._v(t._s(t.field.message))])])],1)}),jt=[],Lt={name:"FieldInput",props:{field:{type:Object,default:function(){return{label:"",value:"",message:""}}},disabled:{type:Boolean,default:!1}},methods:{clearMsg:function(){this.field.message=""}}},Ut=Lt,Bt=Object(l["a"])(Ut,Tt,jt,!1,null,null,null),Nt=Bt.exports,zt=function(){return{status:{label:"Available",value:!0},saleBegin:{label:"Sale Begin",value:null,message:""},saleEnd:{label:"Sale End",value:null,message:""},name:{hicon:"text_fields",label:"Name",name:"name",type:"text",value:"",message:""},code:{hicon:"view_module",label:"Code",name:"code",type:"text",value:"",maxlength:6,message:""},origin:{hicon:"monetization_on",label:"Origin Price",name:"origin",type:"number",value:0,message:""},price:{hicon:"attach_money",label:"Price",name:"price",type:"number",value:0,message:""},sale:{hicon:"local_offer",label:"Sale",name:"sale",type:"number",value:"",message:""},quantity:{hicon:"swap_vert",label:"Quantity",name:"quantity",type:"number",value:"",message:""}}},It={name:"ProductForm",components:{"field-input":yt,"field-date":Nt},mixins:[N],props:{product:{type:Object,default:function(){return{}}}},data:function(){return{loading:!1,formAdd:!0,form:zt()}},computed:{formEdit:function(){return!this.formAdd}},created:function(){this.formAdd=!this.product.code,this.product.code&&this.fillForm(this.product)},methods:{clearAllMessages:function(){for(var t in this.form)this.form[t].hasOwnProperty("message")&&(this.form[t].message="")},resetForm:function(){this.clearAllMessages(),this.form.name.value="",this.form.code.value="",this.form.origin.value=0,this.form.price.value=0,this.form.sale.value="",this.form.saleBegin.value=new Date,this.form.saleEnd.value=new Date,this.form.quantity.value="",this.form.status.value=!0,this.formAdd=!0},fillForm:function(t){for(var e in this.form)this.form[e].hasOwnProperty("value")&&(this.form[e].value=t[e])},getFormData:function(){var t={};for(var e in this.form)this.form[e].hasOwnProperty("value")&&(t[e]=this.form[e].value);return t},handleSubmit:function(){this.$root.$emit("hideMsg"),this.loading=!0,this.formAdd?this.add():this.edit()},add:function(){var t=this;this.$axios.post(this.$api.product.add,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.product;s&&t.$root.$emit("productAdded",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})},edit:function(){var t=this;this.$axios.post(this.$api.product.edit,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.product;s&&t.$root.$emit("productEdited",s),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},Rt=It,Qt=(a("1d6b"),Object(l["a"])(Rt,Ft,Pt,!1,null,"006ac27f",null)),Gt=Qt.exports,Jt={name:"Dials",components:{"user-form":wt,"customer-form":Dt,"product-form":Gt},data:function(){return{userDialog:!1,customerDialog:!1,productDialog:!1,product:{}}},mounted:function(){var t=this;this.$root.$on("productSelect",function(e){t.product=e,t.productDialog=!0})},methods:{showNewDialog:function(t){this[t]=!0,this.product={}}}},Vt=Jt,Wt=(a("5761"),Object(l["a"])(Vt,ct,mt,!1,null,"4e09261f",null)),Kt=Wt.exports,Yt={components:{navbar:X,"dash-content":st,notify:ut,dial:Kt}},Ht=Yt,Xt=Object(l["a"])(Ht,G,J,!1,null,null,null),Zt=Xt.exports,te=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout"},[a("h1",[t._v("This is an Dashboard page")])])}],ae={},ne=ae,se=Object(l["a"])(ne,te,ee,!1,null,null,null),ie=(se.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("div",{staticClass:"md-layout-item md-large-size-25 md-medium-size-27 md-small-size-75 md-xsmall-size-100"},[a("user-form",{attrs:{user:t.selected}})],1),a("div",{staticClass:"md-layout-item md-large-size-70 md-medium-size-65 md-small-size-100 md-xsmall-size-100"},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible",value:t.loading,expression:"loading"}],attrs:{"md-mode":"query"}}),a("md-table",{attrs:{"md-sort":"updatedAt","md-sort-order":"desc","md-fixed-header":"","md-sort":t.queryOption.sortField,"md-sort-order":t.queryOption.order,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:md-sort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:mdSortOrder":function(e){return t.$set(t.queryOption,"order",e)},"update:md-sort-order":function(e){return t.$set(t.queryOption,"order",e)}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return a("md-table-row",{attrs:{"table-header-color":"purple","md-selectable":"single"},on:{click:function(e){return t.select(n)}}},[a("md-table-cell",{attrs:{"md-label":"Role","md-sort-by":"isAdmin"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.isAdmin?"Admin":n.isStaff?"Staff":"None")+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Full name","md-sort-by":"fullname"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.fullname)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Username","md-sort-by":"username"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.username)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Phone","md-sort-by":"phone"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.phone)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Join date","md-sort-by":"createdAt"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._cm.getDateTime(n.createdAt))+"\n\t\t\t\t\t")])],1)}}]),model:{value:t.users,callback:function(e){t.users=e},expression:"users"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\t\t\tLIST OF USERS\n\t\t\t\t\t\t")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Type to search..."},on:{input:t.searching},model:{value:t.queryOption.text,callback:function(e){t.$set(t.queryOption,"text",e)},expression:"queryOption.text"}})],1)],1)],1)],1),a("table-botbar",{attrs:{loading:t.loading,index:t.queryOption.index,count:t.count},on:{queryMore:t.queryMore}})],1)])}),oe=[],re=a("75fc"),de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("transition",{attrs:{name:"rotate"}},[t.index&&t.count?a("md-button",{staticClass:"none-pointer",staticStyle:{float:"right","z-index":"0"}},[t._v("\n\t\t\t"+t._s(t.index)+" / "+t._s(t.count)+"\n\t\t")]):t._e()],1),t.loading?a("md-button",[t._v("\n\t\tLoading...\n\t")]):0==t.count?a("md-button",{staticClass:"none-pointer",staticStyle:{color:"darkred"}},[t._v("\n\t\tNo matching record found\n\t")]):t.index==t.count?a("md-button",{staticClass:"none-pointer",attrs:{disabled:""}},[t._v("\n\t\tNo more records\n\t")]):a("div",[a("md-button",{staticClass:"none-pointer"},[t._v("\n\t\t\tLoad more:\n\t\t")]),t._l(t.lengths,function(e,n){return a("span",{key:e},[0==n?a("md-button",{staticClass:"md-primary",on:{click:function(a){t.queryMore(t.getQueryLength(e))}}},[t._v("\n\t\t\t\t"+t._s(t.getQueryLength(e))+" records\n\t\t\t")]):a("span",[t.count-t.index>t.lengths[n-1]?a("md-button",{staticClass:"md-primary",on:{click:function(a){t.queryMore(t.getQueryLength(e))}}},[t._v("\n\t\t\t\t\t"+t._s(t.getQueryLength(e))+" records\n\t\t\t\t")]):t._e()],1)],1)})],2)],1)},le=[],ue={name:"TableBotBar",props:{index:{type:Number,default:0},count:{type:Number,default:0},loading:{type:Boolean,default:!0}},data:function(){return{lengths:[20,50,100]}},methods:{getQueryLength:function(t){return this.index+t>this.count?this.count-this.index:t},queryMore:function(t){this.$emit("queryMore",t)}}},ce=ue,me=Object(l["a"])(ce,de,le,!1,null,null,null),fe=me.exports,pe={name:"UserManagement",components:{"user-form":wt,"table-botbar":fe},mixins:[N],data:function(){return{queryOption:{length:10,index:0,sortField:"updatedAt",order:"desc",text:""},timer:null,loading:!1,count:0,users:[],selected:{}}},created:function(){this.query()},mounted:function(){var t=this;this.$root.$on("userAdded",function(e){t.users.unshift(e)}),this.$root.$on("userEdited",function(e){t.users=t.users.map(function(t){return t.username==e.username?e:t})})},methods:{select:function(t){this.selected=t},searching:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.query()},500)},customSort:function(){this.query()},queryMore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;this.queryOption.length=t,this.query(!0)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,e||(this.queryOption.index=0),this.$axios.post(this.$api.user.query,this.queryOption).then(function(a){var n=a.data,s=n.users,i=n.count;void 0!==i&&(t.count=i),s&&(t.users=e?[].concat(Object(re["a"])(t.users),Object(re["a"])(s)):s,t.queryOption.index=t.users.length)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.queryOption.length=10,t.loading=!1})}}},he=pe,ve=Object(l["a"])(he,ie,oe,!1,null,null,null),be=ve.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("div",{staticClass:"md-layout-item md-large-size-25 md-medium-size-27 md-small-size-75 md-xsmall-size-100"},[a("customer-form",{attrs:{customer:t.selected}})],1),a("div",{staticClass:"md-layout-item md-large-size-70 md-medium-size-65 md-small-size-100 md-xsmall-size-100"},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible",value:t.loading,expression:"loading"}],attrs:{"md-mode":"query"}}),a("md-table",{attrs:{"md-sort":"updatedAt","md-sort-order":"desc","md-fixed-header":"","md-sort":t.queryOption.sortField,"md-sort-order":t.queryOption.order,"md-sort-fn":t.customSort,primary:""},on:{"update:mdSort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:md-sort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:mdSortOrder":function(e){return t.$set(t.queryOption,"order",e)},"update:md-sort-order":function(e){return t.$set(t.queryOption,"order",e)}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return a("md-table-row",{attrs:{"table-header-color":"purple","md-selectable":"single"},on:{click:function(e){return t.select(n)}}},[a("md-table-cell",{attrs:{"md-label":"Full name","md-sort-by":"fullname"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.fullname)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Phone","md-sort-by":"phone"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.phone)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Point","md-sort-by":"point"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.point)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Join date","md-sort-by":"createdAt"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._cm.getDateTime(n.createdAt))+"\n\t\t\t\t\t")])],1)}}]),model:{value:t.customers,callback:function(e){t.customers=e},expression:"customers"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h2",{attrs:{"md-title":""}},[t._v("\n\t\t\t\t\t\t\tLIST OF CUSTOMERS\n\t\t\t\t\t\t")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Type to search..."},on:{input:t.searching},model:{value:t.queryOption.text,callback:function(e){t.$set(t.queryOption,"text",e)},expression:"queryOption.text"}})],1)],1)],1)],1),a("table-botbar",{attrs:{loading:t.loading,index:t.queryOption.index,count:t.count},on:{queryMore:t.queryMore}})],1)])},_e=[],ye={name:"CustomerManagement",components:{"customer-form":Dt,"table-botbar":fe},mixins:[N],data:function(){return{queryOption:{length:10,index:0,sortField:"updatedAt",order:"desc",text:""},timer:null,loading:!1,count:0,customers:[],selected:{}}},created:function(){this.query()},mounted:function(){var t=this;this.$root.$on("customerAdded",function(e){t.customers.unshift(e)}),this.$root.$on("customerEdited",function(e){t.customers=t.customers.map(function(t){return t._id==e._id?e:t})})},methods:{select:function(t){this.selected=t},searching:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.query()},500)},customSort:function(){this.query()},queryMore:function(t){this.queryOption.length=t,this.query(!0)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,e||(this.queryOption.index=0),this.$axios.post(this.$api.customer.query,this.queryOption).then(function(a){var n=a.data,s=n.customers,i=n.count;void 0!==i&&(t.count=i),s&&(t.customers=e?[].concat(Object(re["a"])(t.customers),Object(re["a"])(s)):s,t.queryOption.index=t.customers.length)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.queryOption.length=10,t.loading=!1})}}},xe=ye,Ce=Object(l["a"])(xe,ge,_e,!1,null,null,null),$e=Ce.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("div",{staticClass:"md-layout-item md-layout-item md-large-size-90 md-medium-size-95"},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible",value:t.loading,expression:"loading"}],attrs:{"md-mode":"query"}}),a("md-table",{attrs:{"md-sort":"updatedAt","md-sort-order":"desc","md-fixed-header":"","md-sort":t.queryOption.sortField,"md-sort-order":t.queryOption.order,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:md-sort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:mdSortOrder":function(e){return t.$set(t.queryOption,"order",e)},"update:md-sort-order":function(e){return t.$set(t.queryOption,"order",e)}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return a("md-table-row",{attrs:{"table-header-color":"purple","md-selectable":"single"},on:{click:function(e){return t.select(n)}}},[a("md-table-cell",{attrs:{"md-label":"Status","md-sort-by":"status"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.status?"On":"Off")+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Name","md-sort-by":"name"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.name)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Code","md-sort-by":"code"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.code)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Quantity","md-sort-by":"quantity"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.quantity)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Origin Price","md-sort-by":"origin"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._cm.parseMoney(n.origin))+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Price","md-sort-by":"price"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._cm.parseMoney(n.price))+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Sale","md-sort-by":"sale"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.sale+"%")+"\n\t\t\t\t\t\t"),t.isSale(n)?a("span",[a("md-icon",[t._v("check_circle")])],1):a("span",[a("md-icon",[t._v("highlight_off")])],1),a("md-tooltip",{attrs:{"md-direction":"left"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._cm.getDate(n.saleBegin))+"\n\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t"+t._s(t._cm.getDate(n.saleEnd))+"\n\t\t\t\t\t\t")])],1)],1)}}]),model:{value:t.products,callback:function(e){t.products=e},expression:"products"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h2",[t._v("\n\t\t\t\t\t\t\tLIST OF PRODUCTS\n\t\t\t\t\t\t")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Type to search..."},on:{input:t.searching},model:{value:t.queryOption.text,callback:function(e){t.$set(t.queryOption,"text",e)},expression:"queryOption.text"}})],1)],1)],1)],1),a("table-botbar",{attrs:{loading:t.loading,index:t.queryOption.index,count:t.count},on:{queryMore:t.queryMore}})],1)])},we=[],qe={name:"ProductManagement",components:{"table-botbar":fe},mixins:[N],data:function(){return{queryOption:{length:10,index:0,sortField:"updatedAt",order:"desc",text:""},timer:null,loading:!1,date:new Date,products:[],selected:{},count:0}},created:function(){this.query()},mounted:function(){var t=this;this.$root.$on("productAdded",function(e){t.products.unshift(e)}),this.$root.$on("productEdited",function(e){t.products=t.products.map(function(t){return t.code==e.code?e:t})})},methods:{select:function(t){this.selected=t,this.$root.$emit("productSelect",t)},isSale:function(t){return!!(t.sale&&t.saleBegin&&t.saleEnd&&this.date>new Date(t.saleBegin)&&this.date<new Date(t.saleEnd))},searching:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.query()},500)},customSort:function(){this.query()},queryMore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;this.queryOption.length=t,this.query(!0)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,e||(this.queryOption.index=0),this.$axios.post(this.$api.product.query,this.queryOption).then(function(a){var n=a.data,s=n.products,i=n.count;void 0!==i&&(t.count=i),s&&(t.products=e?[].concat(Object(re["a"])(t.products),Object(re["a"])(s)):s,t.queryOption.index=t.products.length)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.queryOption.length=10,t.loading=!1})}}},Me=qe,Ee=Object(l["a"])(Me,Oe,we,!1,null,null,null),ke=Ee.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("md-dialog",{staticClass:"bill-dialog",attrs:{"md-active":t.billDialog},on:{"update:mdActive":function(e){t.billDialog=e},"update:md-active":function(e){t.billDialog=e}}},[a("md-dialog-content",[a("bill-paid",{attrs:{bill:t.selected}})],1)],1),a("div",{staticClass:"md-layout-item md-large-size-90 md-medium-size-95"},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible",value:t.loading,expression:"loading"}],attrs:{"md-mode":"query"}}),a("md-table",{attrs:{"md-sort":"updatedAt","md-sort-order":"desc","md-fixed-header":"","md-sort":t.queryOption.sortField,"md-sort-order":t.queryOption.order,"md-sort-fn":t.customSort},on:{"update:mdSort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:md-sort":function(e){return t.$set(t.queryOption,"sortField",e)},"update:mdSortOrder":function(e){return t.$set(t.queryOption,"order",e)},"update:md-sort-order":function(e){return t.$set(t.queryOption,"order",e)}},scopedSlots:t._u([{key:"md-table-row",fn:function(e){var n=e.item;return a("md-table-row",{attrs:{"table-header-color":"purple","md-selectable":"single"},on:{click:function(e){return t.select(n)}}},[a("md-table-cell",{attrs:{"md-label":"Customer","md-sort-by":"customer.fullname"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.customer.fullname)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Payment","md-sort-by":"payment"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.payment)+"\n\t\t\t\t\t")]),a("md-table-cell",{staticStyle:{width:"600px"},attrs:{"md-label":"Products"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.products.map(function(t){return t.product.name}).join(" | "))+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Subpoint","md-sort-by":"subpoint"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.subpoint)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Total","md-sort-by":"total"}},[t._v("\n\t\t\t\t\t\t"+t._s(t._cm.parseMoney(n.total))+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Bonus","md-sort-by":"bonus"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.bonus)+"\n\t\t\t\t\t")]),a("md-table-cell",{attrs:{"md-label":"Added by","md-sort-by":"user.fullname"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.user.fullname)+"\n\t\t\t\t\t")])],1)}}]),model:{value:t.bills,callback:function(e){t.bills=e},expression:"bills"}},[a("md-table-toolbar",[a("div",{staticClass:"md-toolbar-section-start"},[a("h2",[t._v("\n\t\t\t\t\t\t\tLIST OF BILLS\n\t\t\t\t\t\t")])]),a("md-field",{staticClass:"md-toolbar-section-end",attrs:{"md-clearable":""}},[a("md-input",{attrs:{placeholder:"Type to search..."},on:{input:t.searching},model:{value:t.queryOption.text,callback:function(e){t.$set(t.queryOption,"text",e)},expression:"queryOption.text"}})],1)],1)],1)],1),a("table-botbar",{attrs:{loading:t.loading,index:t.queryOption.index,count:t.count},on:{queryMore:t.queryMore}})],1)],1)},Ae=[],De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-bill"},[a("h2",[t._v("\n\t\tBILL - "+t._s(t.process.env.VUE_APP_TITLE)+" "+t._s(t.bill.branchId)+"\n\t")]),a("div",{staticClass:"info info-bill"},[a("b",[t._v("BILL")]),a("p",[t._v("ID: "+t._s(t.bill._id))]),a("p",[t._v("Staff: "+t._s(t.bill.user.fullname))]),a("p",[t._v("Date: "+t._s(t._cm.getDateTime(t.bill.createdAt)))])]),a("div",{staticClass:"info info-customer"},[a("b",[t._v("CUSTOMER")]),a("p",[t._v("Name:  "+t._s(t.bill.customer.fullname))]),a("p",[t._v("Phone: "+t._s(t.bill.customer.phone))])]),a("div",[a("table",[t._m(0),a("tbody",t._l(t.bill.products,function(e,n){return a("tr",{key:e._id},[a("td",[t._v(t._s(n+1))]),a("td",[t._v(t._s(e.product.name))]),a("td",[t._v(t._s(t._cm.parseMoney(e.price)))]),a("td",[e.sale?a("div",[t._v("\n\t\t\t\t\t\t\t- "+t._s(e.sale)+"%\n\t\t\t\t\t\t")]):t._e()]),a("td",[t._v("×"+t._s(e.quantity))]),a("td",[t._v(t._s(t._cm.parseMoney(t.subtotal(e))))])])}),0),a("tfoot",[t.bill.subpoint?a("tr",[a("td"),a("td"),t._m(1),a("td",[t._v(t._s(t.bill.subpoint))]),a("td",[t._v("reduce: ")]),a("td",[t._v("- "+t._s(t._cm.parseMoney(t.bill.subpoint)))])]):t._e(),a("tr",[a("td"),a("td"),a("td"),a("td"),a("td",[t._v("Total:")]),a("td",[t._v(t._s(t._cm.parseMoney(t.totalPrice())))])])])])]),a("div",{attrs:{align:"right"}},[a("b",[t._v("Point bonus: ")]),a("span",[t._v("+ "+t._s(t.bill.bonus))])])])},Fe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Index")]),a("th",[t._v("Product name")]),a("th",[t._v("Price")]),a("th",[t._v("Sale")]),a("th",[t._v("Quantity")]),a("th",[t._v("Subtotal")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("b",[t._v("Point use:")])])}],Pe=a("59ad"),Te=a.n(Pe),je={name:"BillForm",props:{bill:{type:Object,default:function(){return{}}}},methods:{subtotal:function(t){return t.price*(100-t.sale)/100*t.quantity},totalPrice:function(){var t=this;return this.bill.products.reduce(function(e,a){return e+t.subtotal(a)},-Te()(this.bill.subpoint))}}},Le=je,Ue=(a("53e7"),Object(l["a"])(Le,De,Fe,!1,null,"3ecb485b",null)),Be=Ue.exports,Ne={name:"BillManagement",components:{"table-botbar":fe,"bill-paid":Be},mixins:[N],data:function(){return{queryOption:{length:10,index:0,sortField:"updatedAt",order:"desc",text:""},timer:null,loading:!1,bills:[],selected:{},billDialog:!1,count:0}},created:function(){this.query()},mounted:function(){var t=this;this.$root.$on("billAdded",function(e){t.bills.unshift(e)})},methods:{select:function(t){this.selected=t,this.billDialog=!0},searching:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout(function(){t.query()},500)},customSort:function(){this.query()},queryMore:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;this.queryOption.length=t,this.query(!0)},query:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,e||(this.queryOption.index=0),this.$axios.post(this.$api.bill.query,this.queryOption).then(function(a){var n=a.data,s=n.bills,i=n.count;void 0!==i&&(t.count=i),s&&(t.bills=e?[].concat(Object(re["a"])(t.bills),Object(re["a"])(s)):s,t.queryOption.index=t.bills.length)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.queryOption.length=10,t.loading=!1})}}},ze=Ne,Ie=Object(l["a"])(ze,Se,Ae,!1,null,null,null),Re=Ie.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("div",{staticClass:"md-layout-item md-large-size-70 md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-large-size-100"},[a("md-card",[a("md-card-content",[a("div",{staticStyle:{width:"50%",margin:"auto"}},[a("product-autocomplete",{attrs:{message:t.form.product.message,product:t.form.product.value},on:{"update:message":function(e){return t.$set(t.form.product,"message",e)},"update:product":function(e){return t.$set(t.form.product,"value",e)}}})],1),a("br"),a("product-list",{attrs:{products:t.form.products},on:{"update:products":function(e){return t.$set(t.form,"products",e)}}})],1)],1)],1)]),a("div",{staticClass:"md-layout-item md-large-size-30 md-layout md-gutter",staticStyle:{"padding-left":"0"}},[a("div",{staticClass:"md-layout-item md-large-size-100",staticStyle:{"padding-left":"0"}},[a("customer-autocomplete",{attrs:{message:t.form.customer.message,customer:t.form.customer.value},on:{"update:message":function(e){return t.$set(t.form.customer,"message",e)},"update:customer":function(e){return t.$set(t.form.customer,"value",e)}}})],1),a("div",{staticClass:"md-layout-item md-large-size-100",staticStyle:{"padding-left":"0"}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-card-content",[a("div",{staticStyle:{"min-height":"10px"}},[a("transition",{attrs:{name:"height"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t._cm.notEmpty(t.form.customer.value),expression:"_cm.notEmpty(form.customer.value)"}]},[a("h2",{},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t.form.customer.value.fullname)+"\n\t\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t\t"+t._s(t.form.customer.value.phone)+"\n\t\t\t\t\t\t\t\t")]),a("field-input",{attrs:{field:t.form.subpoint,disabled:t.loading}})],1)])],1),a("div",{},[a("h3",[t._v("TOTAL ITEM:")]),a("h2",{staticClass:"md-text-primary"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.totalCount)+" item"+t._s(t.totalCount>1?"s":"")+"\n\t\t\t\t\t\t")])]),a("div",{},[a("h3",[t._v("TOTAL PRICE:")]),a("h1",{staticClass:"md-text-primary"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._cm.parseMoney(t.totalPrice))+"\n\t\t\t\t\t\t")])]),a("md-radio",{staticClass:"md-primary",attrs:{value:"cash",disabled:t.loading},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},[t._v("\n\t\t\t\t\t\tCash\n\t\t\t\t\t")]),a("md-radio",{staticClass:"md-primary",attrs:{value:"bank",disabled:t.loading},model:{value:t.form.payment,callback:function(e){t.$set(t.form,"payment",e)},expression:"form.payment"}},[t._v("\n\t\t\t\t\t\tBank\n\t\t\t\t\t")])],1),a("div",{staticClass:"md-layout md-alignment-center-space-between"},[a("md-button",[t._v("VAT Included")]),a("div",{},[a("md-button",{attrs:{disabled:t.loading},on:{click:t.resetForm}},[t._v("\n\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t")]),a("md-button",{staticClass:"md-primary",attrs:{disabled:t.loading},on:{click:t.add}},[t._v("\n\t\t\t\t\t\t\tCreate\n\t\t\t\t\t\t")])],1)],1)],1)],1)]),a("md-dialog",{staticClass:"bill-dialog",attrs:{"md-active":t.billDialog},on:{"update:mdActive":function(e){t.billDialog=e},"update:md-active":function(e){t.billDialog=e}}},[a("md-dialog-content",[a("bill-paid",{attrs:{bill:t.billPaid}})],1)],1)],1)},Ge=[],Je=a("0a0d"),Ve=a.n(Je),We=(a("7514"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"query"}}),a("md-card-content",[a("md-autocomplete",{class:{"md-invalid":t.message},attrs:{"md-options":t.customers},on:{"md-changed":t.getDataComplete,"md-opened":function(e){t.customers=[].concat(t.customers)},"md-selected":t.select},scopedSlots:t._u([{key:"md-autocomplete-item",fn:function(e){var a=e.item;return[t._v("\n\t\t\t\t\t"+t._s(a.phone)+" - "+t._s(a.fullname)+"\n\t\t\t\t")]}}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}},[a("label",[t._v("Customer")]),t.text?t._e():a("md-icon",[t._v("\n\t\t\t\t\tsearch\n\t\t\t\t")]),t.text?t._e():a("span",{staticClass:"md-helper-text"},[t._v("Enter name or phone")]),a("span",{staticClass:"md-error"},[t._v(t._s(t.message))])],1)],1)],1)],1)}),Ke=[],Ye={name:"CustomerAutocomplete",mixins:[N],props:{message:{type:String,default:""},customer:{type:Object,default:function(){}}},data:function(){return{loading:!1,text:"",disabled:!1,customers:[],timer:0}},watch:{customer:function(t){this._cm.notEmpty(t)&&(this.text=t.fullname)}},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},select:function(t){this.disabled=!0,this.update("customer",t)},getDataComplete:function(){clearTimeout(this.timer),this.disabled?this.disabled=!1:(this.update("customer",{}),this.update("message",""),""!==this.text&&(this.timer=setTimeout(this.query,500)))},query:function(){var t=this;this.loading=!0,this.$axios.post(this.$api.customer.query,{text:this.text,order:"desc",sortField:"updatedAt",index:0,length:10}).then(function(e){var a=e.data.customers;a&&(t.customers=a,0===a.length&&t.update("message","Not found any customer"))}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},He=Ye,Xe=(a("12ae"),Object(l["a"])(He,We,Ke,!1,null,"74205027",null)),Ze=Xe.exports,ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"query"}}),a("md-autocomplete",{class:{"md-invalid":t.message},attrs:{"md-options":t.products},on:{"md-changed":t.getDataComplete,"md-opened":function(e){t.products=[].concat(t.products)},"md-selected":t.select},scopedSlots:t._u([{key:"md-autocomplete-item",fn:function(e){var n=e.item;return[a("span",{attrs:{disabled:!n.status}},[t._v(t._s(n.code)+" - "+t._s(n.name)+" - "+t._s(t._cm.parseMoney(n.price)))])]}}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}},[a("label",[t._v("Add Product")]),t.text?t._e():a("md-icon",[t._v("\n\t\t\tsearch\n\t\t")]),a("span",{staticClass:"md-helper-text"},[t._v("Enter product name or code")]),a("span",{staticClass:"md-error"},[t._v(t._s(t.message))])],1)],1)},ea=[],aa=(a("55dd"),{name:"ProductAutocomplete",mixins:[N],props:{message:{type:String,default:""},product:{type:Object,default:function(){return{value:{}}}}},data:function(){return{loading:!1,text:"",disabled:!1,products:[],timer:0}},watch:{product:function(t){this.text=""}},methods:{update:function(t,e){this.$emit("update:".concat(t),e)},select:function(t){this.disabled=!0,t.status?(this.update("product",t),this.update("message","")):(this.text="".concat(t.name," - ").concat(t.code),this.update("message","This product is currently unavailable for sale"))},getDataComplete:function(){clearTimeout(this.timer),this.disabled?this.disabled=!1:(this.update("message",""),""!==this.text&&(this.timer=setTimeout(this.query,500)))},query:function(){var t=this;this.loading=!0,this.$axios.post(this.$api.product.query,{text:this.text,order:"desc",sortField:"updatedAt",index:0,length:10}).then(function(e){var a=e.data.products;a&&(t.products=a.sort(function(t,e){return"".concat(e.status).localeCompare("".concat(t.status))}),0===a.length&&t.update("message","Not found any product"))}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}}),na=aa,sa=(a("3d6e"),Object(l["a"])(na,ta,ea,!1,null,"53ec3f76",null)),ia=sa.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"viewport",staticStyle:{"min-height":"290px"}},[a("md-toolbar",{attrs:{"md-elevation":1}},[a("span"),a("span",{staticClass:"md-title"},[t._v("List: ")]),t.products.length<1?a("span",{staticClass:"md-title"},[t._v(t._s(t.products.length)+" product ")]):a("span",{staticClass:"md-title"},[t._v(t._s(t.products.length)+" products ")])]),a("transition-group",{tag:"md-list",staticClass:"md-double-line",attrs:{name:"height",mode:"out-in"}},t._l(t.products,function(e){return a("div",{key:e.code},[a("md-list-item",{staticClass:"md-layout"},[a("div",{staticClass:"md-list-item-text md-layout-item md-large-size-30"},[a("span",[t._v(t._s(e.name))]),a("span",[t._v(t._s(e.code))])]),a("div",{staticClass:"md-list-item-text"},[a("span",[t._v(t._s(t._cm.parseMoney(e.salePrice)))]),e.sale?a("span",[a("span",{staticClass:"line-through"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t._cm.parseMoney(e.price))+"\n\t\t\t\t\t\t")]),a("span",{staticClass:"sale-pill"},[a("span",{staticClass:"sale-pill_text"},[t._v(" -"+t._s(e.sale)+"% ")]),a("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t._cm.getDate(e.saleBegin))+"\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\t"+t._s(t._cm.getDate(e.saleEnd))+"\n\t\t\t\t\t\t\t")])],1)]):t._e()]),a("div",{staticClass:"md-list-item-text"},[a("span",{staticStyle:{"max-width":"70px"}},[a("md-field",[a("label",[t._v("Quantity")]),a("md-input",{attrs:{min:"1",max:e.quantity,type:"Number"},on:{change:function(a){return t.updatePrice(e)}},model:{value:e.buyQuantity,callback:function(a){t.$set(e,"buyQuantity",t._n(a))},expression:"product.buyQuantity"}})],1),a("span",[t._v("/"+t._s(e.quantity))])],1)]),a("div",{staticClass:"md-list-item-text"},[t._v("\n\t\t\t\t\t= "+t._s(t._cm.parseMoney(e.total))+"\n\t\t\t\t")]),a("md-button",{staticClass:"md-icon-button md-list-action",on:{click:function(a){return t.remove(e)}}},[a("md-icon",[t._v("delete")])],1)],1),a("md-divider")],1)}),0)],1)},ra=[],da={name:"BillProductList",props:{products:{type:Array,default:function(){return[]}}},methods:{sync:function(t){this.$emit("update:products",t||Object(re["a"])(this.products))},remove:function(t){this.sync(this.products.filter(function(e){return e.code!==t.code}))},updatePrice:function(t){t.total=t.salePrice*t.buyQuantity,this.sync()}}},la=da,ua=Object(l["a"])(la,oa,ra,!1,null,null,null),ca=ua.exports,ma=function(){return{customer:{value:{},message:""},product:{value:{},message:""},products:[],subpoint:{label:"Use point",type:"Number",value:0,suffix:"/",max:0,min:0,message:""},payment:"cash"}},fa={name:"BillCreator",components:{"field-input":yt,"customer-autocomplete":Ze,"product-autocomplete":ia,"product-list":ca,"bill-paid":Be},mixins:[N],data:function(){return{loading:!1,billDialog:!1,billPaid:{},form:ma()}},computed:{totalCount:function(){return this.form.products.reduce(function(t,e){return t+e.buyQuantity},0)},totalPrice:function(){return this.form.products.reduce(function(t,e){return t+e.total},0)-this.form.subpoint.value}},watch:{"form.product.value":function(t,e){if(this._cm.notEmpty(t))if(this.form.products.find(function(e){return e.code==t.code}))this.form.product.message="This product is exists in bill";else{var a=Ve()(),n=0;t.sale&&t.saleBegin&&t.saleEnd&&a>new Date(t.saleBegin)&&a<new Date(t.saleEnd)&&(n=t.sale),t.sale=n,t.salePrice=t.price*(100-n)/100,t.buyQuantity=1,t.total=t.salePrice,this.form.products.unshift(t)}},"form.customer.value":function(t,e){this._cm.notEmpty(t)&&(this.form.subpoint.suffix="/".concat(t.point),this.form.subpoint.max=t.point)}},methods:{resetForm:function(){this.form=ma()},getFormData:function(){return{customerId:this.form.customer.value._id,subpoint:this.form.subpoint.value,payment:this.form.payment,products:this.form.products}},add:function(){var t=this;this.loading=!0,this.$root.$emit("hideMsg"),this.$axios.post(this.$api.bill.add,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.bill,i=a.customer;t.billPaid=s,t.billDialog=!0,t.resetForm(),t.handleMessage(n),t.form.customer.value=i}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},pa=fa,ha=(a("7cf7"),Object(l["a"])(pa,Qe,Ge,!1,null,"9ae61940",null)),va=ha.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("form",{staticClass:"md-layout-item md-large-size-30 md-medium-size-50 md-small-size-100",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.edit(e)}}},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"indeterminate"}}),a("md-card-content",{staticClass:"md-toolbar"},[a("h2",[t._v("Profile: "+t._s(t.form.username.value))]),a("md-switch",{staticClass:"md-primary sw-edit",staticStyle:{float:"right"},model:{value:t.formEdit,callback:function(e){t.formEdit=e},expression:"formEdit"}},[t._v("\n\t\t\t\t\tEdit\n\t\t\t\t")])],1),a("md-card-content",[a("md-list",[a("transition",{attrs:{name:"height"}},[t.formEdit?t._e():a("div",[a("md-list-item",[a("div",{staticClass:"md-list-item-text"},[t._v("\n\t\t\t\t\t\t\t\t\tJoin Date:\n\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"md-list-item-text"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._cm.getDateTime(t.form.createdAt.value))+"\n\t\t\t\t\t\t\t\t")])]),a("md-list-item",[a("div",{staticClass:"md-list-item-text"},[t._v("\n\t\t\t\t\t\t\t\t\tLast Edited Date:\n\t\t\t\t\t\t\t\t")]),a("div",{staticClass:"md-list-item-text"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(t._cm.getDateTime(t.form.updatedAt.value))+"\n\t\t\t\t\t\t\t\t")])])],1)])],1),a("field-input",{attrs:{field:t.form.username,disabled:!0,tip2:t.formEdit}}),a("field-input",{attrs:{field:t.form.fullname,disabled:t.disabledForm}}),a("field-input",{attrs:{field:t.form.phone,disabled:t.disabledForm}}),a("transition",{attrs:{name:"height"}},[t.formEdit?a("div",[a("field-input",{attrs:{field:t.form.curpassword,disabled:t.disabledForm}}),a("field-input",{attrs:{field:t.form.password,disabled:t.disabledForm}})],1):t._e()])],1),t.formEdit?a("md-card-actions",[a("md-button",{staticClass:"md-accent",attrs:{type:"button",disabled:t.loading},on:{click:t.resetForm}},[t._v("\n\t\t\t\t\tReset\n\t\t\t\t")]),a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:t.loading}},[t._v("\n\t\t\t\t\tEdit\n\t\t\t\t")])],1):t._e()],1)],1)])},ga=[],_a=function(){return{createdAt:{value:""},updatedAt:{value:""},fullname:{hicon:"title",label:"Full name",name:"fullname",type:"text",value:"",message:""},username:{hicon:"account_box",label:"Username",name:"username",type:"text",tooltip2:"Username can not be edited",value:"",message:""},phone:{hicon:"local_phone",label:"Phone number",name:"phone",type:"text",value:"",message:""},curpassword:{hicon:"dashboard",label:"Current Password",name:"curpassword",type:"password",value:"",message:""},password:{hicon:"dashboard",label:"New Password",name:"password",type:"password",helper:"Enter only if you want to change your password",value:"",message:""}}},ya={name:"UserProfile",components:{"field-input":yt},mixins:[N],data:function(){return{loading:!1,formEdit:!1,form:_a()}},computed:{disabledForm:function(){return this.loading||!this.formEdit}},watch:{formEdit:function(t){t||this.resetForm()}},created:function(){this.resetForm()},methods:{resetForm:function(){_a(),this.fillForm(this.$cookies.get("_us_r"))},fillForm:function(t){for(var e in this.form)this.form[e].hasOwnProperty("value")&&(this.form[e].value=t[e])},getFormData:function(){var t={fullname:this.form.fullname.value,phone:this.form.phone.value,curpassword:this.form.curpassword.value};return this.form.password.value&&(t.password=this.form.password.value),t},edit:function(){var t=this;this.loading=!0,this.$axios.post(this.$api.user.selfEdit,this.getFormData()).then(function(e){var a=e.data,n=a.message,s=a.user;s&&(t.$root.$emit("selfEdit",s),t.resetForm()),t.handleMessage(n)}).catch(function(e){t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},xa=ya,Ca=(a("85e5"),Object(l["a"])(xa,ba,ga,!1,null,"2e8efa0c",null)),$a=Ca.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[a("div",{staticClass:"md-layout-item md-large-size-55 md-medium-size-70 md-small-size-100"},[a("md-card",[a("md-progress-bar",{directives:[{name:"visible",rawName:"v-visible.hid",value:t.loading,expression:"loading",modifiers:{hid:!0}}],attrs:{"md-mode":"query"}}),a("md-switch",{staticClass:"md-primary sw-title",model:{value:t.autoUpdate,callback:function(e){t.autoUpdate=e},expression:"autoUpdate"}},[t._v("\n\t\t\t\tAuto update\n\t\t\t")]),a("div",{staticClass:"text-center"},[a("h2",{staticStyle:{"margin-bottom":"5px"}},[t._v("\n\t\t\t\t\tACTIVITY LOG\n\t\t\t\t")]),a("md-field",{staticStyle:{width:"30%",margin:"0 auto 10px auto"}},[a("label",[t._v("\n\t\t\t\t\t\tAction filter\n\t\t\t\t\t")]),a("md-input",{attrs:{type:"text"},on:{input:t.searching,keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.queryOption.text=""}},model:{value:t.queryOption.text,callback:function(e){t.$set(t.queryOption,"text",e)},expression:"queryOption.text"}}),a("md-icon",[t._v("filter_list")])],1)],1),a("div",{staticStyle:{padding:"0 20px 20px 20px"}},[a("div",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("table",[a("transition-group",{tag:"tbody",attrs:{tag:"tbody",name:"rowfly",mode:"out-in"}},t._l(t.aclogs,function(e){return a("tr",{key:e._id},[a("td",[a("span",[t._v(t._s(t._cm.getTime(e.createdAt)))]),a("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t._cm.getDate(e.createdAt))+"\n\t\t\t\t\t\t\t\t\t")])],1),a("td",[a("p",{staticClass:"text"},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.action)+" —\n\t\t\t\t\t\t\t\t\t\t"),a("span",{staticClass:"text-normal"},[t._v(t._s(t.getLogNote(e)))])])])])}),0)],1)])])],1)],1)])},wa=[],qa={name:"ActivityLog",mixins:[N],data:function(){return{loading:!1,queryOption:{text:"",order:"desc",sortField:"updatedAt",index:0,length:20},autoUpdate:!0,interval:null,timeout:null,delay:5e3,aclogs:[]}},watch:{autoUpdate:function(t){var e=this;t?(this.query(),this.interval=setInterval(function(){e.query()},this.delay)):clearInterval(this.interval)}},created:function(){this.query(),this.autoUpdate=!1},beforeDestroy:function(){this.autoUpdate=!1,clearInterval(this.interval)},methods:{getLogNote:function(t){return this._cm.replaceVars(t.note,{actor:t.actor.fullname,target:t.target.fullname||t.target.name||t.target.username||t.target._id})},searching:function(){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.query(!1)},400)},query:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.loading=!0,this.$axios.post(this.$api.activityLog.query,this.queryOption).then(function(a){var n=a.data.aclogs;n&&(t.aclogs=e?t._cm.uniqBy("_id",[].concat(Object(re["a"])(n),Object(re["a"])(t.aclogs))):n)}).catch(function(e){t.autoUpdate=!1,t.handleMessage(e.message)}).then(function(){t.loading=!1})}}},Ma=qa,Ea=(a("78ea"),Object(l["a"])(Ma,Oa,wa,!1,null,"8fcd1972",null)),ka=Ea.exports,Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("#404")]),t._m(0),t._m(1),a("router-link",{staticClass:"link-container",attrs:{tag:"div",to:"/"}},[a("a",{staticClass:"more-link",attrs:{to:"/"}},[t._v("Go back")])])],1)},Aa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"zoom-area"},[a("b",[t._v("PAGE NOT FOUND")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"error-container"},[a("span",{staticClass:"four"},[a("span",{staticClass:"screen-reader-text"},[t._v("4")])]),a("span",{staticClass:"zero"},[a("span",{staticClass:"screen-reader-text"},[t._v("0")])]),a("span",{staticClass:"four"},[a("span",{staticClass:"screen-reader-text"},[t._v("4")])])])}],Da={},Fa=Da,Pa=(a("25cc"),Object(l["a"])(Fa,Sa,Aa,!1,null,"a0b215ea",null)),Ta=Pa.exports,ja=new s["a"]({mode:"history",base:"/",routes:[{path:"/",component:P,children:[{path:"/login",name:"login",component:Q,meta:{title:"Login",middleware:E.logout}},{path:"/logout",name:"logout",redirect:"/login",meta:{title:"Logout"}},{path:"/",component:Zt,beforeEnter:E.guard,redirect:"/bill-creator",children:[{path:"profile",name:"profile",component:$a,meta:{title:"Profile"}},{path:"users",name:"users",component:be,meta:{title:"User Management"}},{path:"customers",name:"customers",component:$e,meta:{title:"Customer Management"}},{path:"products",name:"products",component:ke,meta:{title:"Product Management"}},{path:"bill-creator",name:"bill-creator",component:va,meta:{title:"Create Bill"}},{path:"bills",name:"bills",component:Re,meta:{title:"Bill Management"}},{path:"activity-logs",name:"activity-logs",component:ka,meta:{title:"Activity Log"}}]},{path:"*",name:"404",component:Ta,meta:{title:"Page not found"}}]}]});function La(t,e,a){var n=e[a];return n?function(){t.next.apply(t,arguments);var s=La(t,e,a+1);n(Object(p["a"])({},t,{next:s}))}:t.next}ja.beforeEach(function(t,e,a){if(t.meta.middleware){var n=f()(t.meta.middleware)?t.meta.middleware:[t.meta.middleware],s={from:e,next:a,router:ja,to:t},i=La(s,n,1);return n[0](Object(p["a"])({},s,{next:i}))}return a()}),ja.afterEach(function(t,e){document.title="".concat(t.meta.title||" "," | ").concat("POS Branch")});var Ua=ja,Ba={auth:{login:"/auth/login",logout:"/auth/logout"},user:{add:"/user/add",edit:"/user/edit",query:"/user/query",selfEdit:"/user/selfEdit"},customer:{add:"/customer/add",edit:"/customer/edit",query:"/customer/query"},product:{add:"/product/add",edit:"/product/edit",query:"/product/query"},bill:{add:"/bill/add",query:"/bill/query"},activityLog:{query:"/activity-log/query"}},Na={visible:{bind:function(t,e){t.classList.add("fade"),e.modifiers&&e.modifiers.hid&&t.classList.add("fadeOut")},update:function(t,e,a){e.value?(t.classList.add("fadeIn"),t.classList.remove("fadeOut")):(t.classList.add("fadeOut"),t.classList.remove("fadeIn"))}}},za=a("a4bb"),Ia=a.n(za),Ra=a("7618"),Qa={parseMoney:function(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})},notEmpty:function(t){switch(Object(Ra["a"])(t)){case"string":return""!==t;case"number":return!0;case"boolean":return!0;case"object":return null!==t&&Ia()(t).length>0;case"undefined":return!1;default:return!1}},getDate:function(t){var e=new Date(t);return e.toLocaleDateString("en-GB")},getDateTime:function(t){var e=new Date(t);return e.toLocaleString("en-GB")},getTime:function(t){var e=new Date(t);return e.toLocaleTimeString("en-GB")},uniqBy:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=0,n=e.length;a<n-1;a++)for(var s=a+1;s<n;s++)e[a][t]===e[s][t]&&(e.splice(s,1),n=e.length);return e},replaceVars:function(t,e){for(var a in e)t=t.replace(":".concat(a),"<".concat(e[a],">"));return t}},Ga=Qa,Ja=a("5d73"),Va=a.n(Ja),Wa=["MdButton","MdContent","MdField","MdProgress","MdTabs","MdCard","MdTable","MdRipple","MdEmptyState","MdRadio","MdSnackbar","MdTooltip","MdCheckbox","MdChips","MdSpeedDial","MdDialog","MdDatepicker","MdMenu","MdList","MdAutocomplete","MdSubheader","MdDivider","MdToolbar","MdSwitch"].map(function(t){return a("9c30")[t]}),Ka={install:function(t,e){var a=!0,n=!1,s=void 0;try{for(var i,o=Va()(Wa);!(a=(i=o.next()).done);a=!0){var r=i.value;t.use(r)}}catch(d){n=!0,s=d}finally{try{a||null==o.return||o.return()}finally{if(n)throw s}}}};a("51de"),a("bb35");n["default"].config.productionTip=!1,n["default"].prototype.$api=Ba,n["default"].prototype.$axios=q,n["default"].prototype.$cookies=_,n["default"].prototype._cm=Ga,n["default"].use(s["a"]),n["default"].use(Ka),n["default"].directive("visible",Na.visible),n["default"].component("router-link",n["default"].options.components.RouterLink),n["default"].component("router-view",n["default"].options.components.RouterView),new n["default"]({router:Ua,render:function(t){return t(c)}}).$mount("#app")},5761:function(t,e,a){"use strict";var n=a("1611"),s=a.n(n);s.a},"5ff0":function(t,e,a){},"78ea":function(t,e,a){"use strict";var n=a("8912"),s=a.n(n);s.a},"7cf7":function(t,e,a){"use strict";var n=a("d2a0"),s=a.n(n);s.a},"85e5":function(t,e,a){"use strict";var n=a("046b"),s=a.n(n);s.a},8912:function(t,e,a){},a87a:function(t,e,a){},aa8d:function(t,e,a){},aefb:function(t,e,a){"use strict";var n=a("00e6"),s=a.n(n);s.a},b368:function(t,e,a){},bb35:function(t,e,a){},c2fe:function(t,e,a){},cde1:function(t,e,a){"use strict";var n=a("aa8d"),s=a.n(n);s.a},d00c:function(t,e,a){},d2a0:function(t,e,a){},ffb1:function(t,e,a){"use strict";var n=a("b368"),s=a.n(n);s.a}});
//# sourceMappingURL=app.9a3c49f1.js.map